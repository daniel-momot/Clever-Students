// seedproof.com ~ JavaScript File



$( document ).ready(function() {
	
	// HIDE TEMPORARY HEADINGS AFTER 3s
	$('#h1_temp').delay(3000).fadeOut('slow');
	
	// HIDE TEMPORARY HEADINGS AFTER 15s
	$('#msg').delay(10000).fadeOut('slow');
	
	
	/*
	$("#add").click(function(){
		$("#addThis").show(500);
		//$("#add").hide();
	});
	*/


	
	/*	
	$( "#add" ).click(function() {
	  $( "#addThis" ).toggleClass( "hidden", 1000, "linear" );
	});
	*/
	
	
	
	$("#addThis").click(function(){
		$( "#addThis" ).toggleClass( "hidden", 1000, "linear" );
	});

	$("#addNothing").click(function(){	
		$( "#addThis" ).addClass( "hidden", 1000, "linear" );
		/*
		
		$("#addThis").hide(100);
		$("#add").show();
		
		*/
	});	
	
	$("#show_navMore").click(function(event){
		event.preventDefault();
		$( "#navMore" ).toggleClass( "hidden", 1000, "linear" );
		//$( "#navMore" ).toggle( "slide", "right", 500 );
		
		//$( "#navMore" ).show( "slide", { direction: "right"  }, 500 );	
		//$( "#navMore" ).animate({"left":"0"}, "slow").removeClass('hidden');	
			
	});
	
	$( "#hide_navMore" ).click(function(event) {		
		event.preventDefault();
		$( "#navMore" ).toggleClass( "hidden", 1000, "linear" );
		//$( "#navMore" ).toggle( "slide" );
		
		//$( "#navMore" ).hide( "slide", { direction: "right"  }, 200 );
		//$( "#navMore" ).animate({"left":"100%"}).addClass('hidden');	
		
		/*
		// Set the effect type
		var effect = 'slide';

		// Set the options for the effect type chosen
		var options = { direction: 'right' };

		// Set the duration (default: 400 milliseconds)
		var duration = 500;

		$('#navMore').toggle(effect, options, duration);	
		*/
		
	});
	/*
	$( "#navMore" ).click(function() {
		event.preventDefault();
		$( "#navMore" ).toggleClass( "hidden", 1000, "linear" );
	});
	*/
	
	$('#sideSpinner > div:gt(0)').hide(800);
	
	/*
	$('#sideSpinner > div').delay(800).toggleClass('whyCardHide');

	setInterval(function() { 
		$("#sideSpinner > div:first")
			.next()
			.animate({
				width: "toggle"
			});
	},  3000);
	*/
	
	setInterval(function() { 
	  $('#sideSpinner > div:first')
		
		//.fadeOut(500)
		
		.hide()
		
		.next()
		
		.fadeIn(1500)
		
		.end()
		
		.appendTo('#sideSpinner');
		
	},  3000);
	
	$("#signupBanner").click(function(){
		window.location.href='https://seedproof.com/secure/new/idea?src=signupBanner';
	});
	$("#sideSpinner").click(function(){
		window.location.href='https://seedproof.com/global/login?src=sideSpinner';
	});
	
	$("#cta_signup_sideSpinner").click(function(){
		window.location.href='https://seedproof.com/global/login?src=cta_signup_sideSpinner';
	});
	
	
	
  	// update form after delay in typing
	var timerid;
	$("#form_idea_submit_feed_top").keyup(function() {
	  var form = this;
	  clearTimeout(timerid);
	  timerid = setTimeout(function() { form.submit(); }, 900);
	});

	
	/*
	
	$(document).on('click', 'a[href^="#"]', function (event) {
		event.preventDefault();

		$('html, body').animate({
			scrollTop: $($.attr(this, 'href')).offset().top - 80
		}, 500);
	});
	
	*/
	
	/*
	
	$('a[href^="#"]').on('click', function(event) {
		
		event.preventDefault();
			
		var target = $(this.getAttribute('href'));

		if( target.length ) {
			event.preventDefault();
			$('html, body').stop().animate({
				scrollTop: target.offset().top - 80
			}, 1000);
		}

	});
	
	*/
	
	/*
	
	// Select all links with hashes
	$('a[href*="#"]')
	  // Remove links that don't actually link to anything
	  .not('[href="#"]')
	  .not('[href="#0"]')
	  .click(function(event) {
		// On-page links
		if (
		  location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') 
		  && 
		  location.hostname == this.hostname
		) {
		  // Figure out element to scroll to
		  var target = $(this.hash);
		  target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
		  // Does a scroll target exist?
		  if (target.length) {
			// Only prevent default if animation is actually gonna happen
			event.preventDefault();
			$('html, body').animate({
			  scrollTop: target.offset().top
			}, 1000, function() {
			  // Callback after animation
			  // Must change focus!
			  var $target = $(target);
			  $target.focus();
			  if ($target.is(":focus")) { // Checking if the target was focused
				return false;
			  } else {
				$target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
				$target.focus(); // Set focus again
			  };
			});
		  }
		}
	  });

*/

 
 /*
$('.idea').click(function() {
    var focusID = this.id;
	focusID = focusID.substring(focusID.indexOf('D')+1);
	var urlString = window.location.href;
	var qString = urlString.substring(urlString.indexOf('&')+1);
	//var currentPage = window.location.href;
	
	var url = [location.protocol, '//', location.host, location.pathname].join('');
	
	//window.location.href=currentPage&&'?comment='&&this.id&&'#'&&this.id;
	//alert( url );
	//alert ( qString );
	//window.location.href=currentPage&&'?comment='&&focusID&&'#'&&focusID
	
	//alert ( url+'?comment='+focusID+'&'+qString );
	location.href=url+'?comment='+focusID+'&'+qString;
	
});
	*/
	
/*
$('.viewable').click(function(event) {
	
	
	var view = $(this).attr('id');
	view=view.replace('ID', '');
	//var viewPath='/view?view='+view;
	var viewPath='/view';

	//alert(viewPath);
	//location.href='https://seedproof.com/view?view='+view;
	
	$( "#viewer" ).toggleClass( "hidden", 1000, "linear" );
	$( "#viewPort" ).toggleClass( "hidden", 1000, "linear" );
	
	$( "#viewPort" ).load(viewPath, 'view='+view);
	
	
	/*
	$.ajax({
		type 		: 'POST',
		url			: 'https://seedproof.com/view/',
		data		: view,
		dataType	: 'text',
		encode 		: true
	});
	*/
	
/*	
});	
*/


/*
$('#viewer').click(function(event) {
	

	$( "#viewPort" ).toggleClass( "hidden", 1000, "linear" );	
	$( "#viewer" ).toggleClass( "hidden", 1000, "linear" );

	
});	
*/

/*
$('#loginWrapper').click(function(event) {
	window.location.href='https://seedproof?src=login-cancel';	
});
*/	

/* 4/26/2018 */
/* TESTED EXAMPLE */
/*
$( '.formVote' ).on( 'submit', function( event ) {

	

	
	var sourceID = $(this).attr("id"); //get form id
	var direc = sourceID.substring(5,7);
	var itemID = sourceID.substring(12);
	var ud=0;
	if (direc=='up') {
		var ud=1;
	}
	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	//var form_data = $(this).serialize(); //Encode form elements for submission	
	var id = $(this).serialize(); //Encode form elements for submission	
	//var btn = " #"+sourceID;
	var btn = '#upvote_'+itemID;
	var btn_inv = '#downvote_'+itemID;
	
	

	
	//alert(id); // works-item id
	//alert(ud); // works-vote direction
	//alert(btn);
	// process the form
	$.ajax({
		//url : './scripts/engage/processVotes.php',
		url : post_url,
		type: request_method,
		data : id,
		dataType: 'json',
		encode          : true,
		success: function (response) {
			//location.reload();
			//$(sourceID).load(" #"+sourceID);
			//alert(form_data);
			if (response=="x") {
				//document.getElementById('id01').style.display='block';
				window.location.href='https://seedproof.com/global/login/';
			} else {
				$( btn ).val(response);
				$( btn ).toggleClass( "votesUp" );
				$( btn ).toggleClass( "votesUp_lite" );
				$( btn_inv ).removeClass( "votesDown" );
				$( btn_inv ).addClass( "votesDown_lite" );					
			}
			alert(response);
		}
	}).done(function(response){ //
		//$(btn).html(btn);
		//$(btn).html('asdfasdf');
		//$(sourceID).load(btn);
		//$(btn).val(response);
		//alert(response);
		//console.log(data);
	});
	
	
	event.preventDefault(); //prevent default action

	
});
*/


//////////////////////////////////
//////////////////////////////////
//////////////////////////////////

/* ENGAGEMENT PROCESSESING */

//////////////////////////////////


/* UPVOTE */

//$( '.form_upvote' ).on( 'submit', function( event ) {
$( document ).on( 'submit', '.form_upvote', function( event ) {
	
	var sourceID = $(this).attr("id"); //get form id
	
	var itemID = sourceID.substring(12);

	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	
	//var form_data = $(this).serialize(); //Encode form elements for submission	
	var id = $(this).serialize(); //Encode form elements for submission	

	var btn = '#upvote_'+itemID;
	var btn_inv = '#downvote_'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/engage/index.php',
		type: request_method,
		data : 	{
						upvote: itemID
						},
		dataType: 'json',
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				//document.getElementById('id01').style.display='block';
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).val(response[0]);
				$( btn_inv ).val(response[1]);
				
				$( btn ).toggleClass( "votesUp" );
				$( btn ).toggleClass( "votedUp" );
				$( btn ).toggleClass( "votesUp_lite" );
				$( btn_inv ).removeClass( "votesDown" );
				$( btn_inv ).removeClass( "votedDown" );
				$( btn_inv ).addClass( "votesDown_lite" );		

								
				///////////
				
				var btn2 = '#commentBox'+itemID;
				//var btn = '#ID'+itemID;

				// process the form
				$.ajax({
					
					url 		: 'https://seedproof.com/scripts/engage/index.php',
					type		: 'POST',
					data 		: 	{
									commentView: itemID
									},
					encode      : true,
					success		: function (response) {

						if (response=="x") {
							window.location.href='https://seedproof.com/global/login?loc='+itemID;
						} else {				
							//$( btn ).append( response );				
							$( btn2 ).html( response );				
						}
						
						//alert(response);
					}
				});				
				
				///////////
				
				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});


/* DOWNVOTE */

//$( '.form_downvote' ).on( 'submit', function( event ) {
$( document ).on( 'submit', '.form_downvote', function( event ) {
	
	var sourceID = $(this).attr("id"); //get form id
	
	var itemID = sourceID.substring(14);

	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	
	//var form_data = $(this).serialize(); //Encode form elements for submission	
	var id = $(this).serialize(); //Encode form elements for submission	

	var btn = '#downvote_'+itemID;
	var btn_inv = '#upvote_'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/engage/index.php',
		type: request_method,
		data : 	{
						downvote: itemID
						},
		dataType: 'json',
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				//document.getElementById('id01').style.display='block';
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).val(response[0]);
				$( btn_inv ).val(response[1]);
				
				$( btn ).toggleClass( "votesDown" );
				$( btn ).toggleClass( "votedDown" );
				$( btn ).toggleClass( "votesDown_lite" );
				$( btn_inv ).removeClass( "votesUp" );
				$( btn_inv ).removeClass( "votedUp" );
				$( btn_inv ).addClass( "votesUp_lite" );							
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});

/* COMMENT */

//$( '.form_new_comment' ).on( 'submit', function( event ) {
$(document).on('submit','.form_new_comment',function( event ) { 
		
	var waiter = $("#waiting");
	waiter.removeClass('hidden');
		
	//$( this ).slideToggle();
	$( this ).find( 'input' ).addClass( 'hide' );
	$( this ).find( '.btn' ).addClass( 'hide' );

	
	var sourceID = $(this).attr("id"); //get form id	
	var itemID = sourceID.substring(14);

	//var post_url = $(this).attr("action"); //get form action url
	//var request_method = $(this).attr("method"); //get form GET/POST method
		
	var id = $(this).serialize(); //Encode form elements for submission	
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	var inp = '#commentText'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/engage/index.php',
		type: 'POST',
		data : 	id,
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( "#"+sourceID ).find( 'input' ).removeClass( 'hide' );
				$( "#"+sourceID ).find( '.btn' ).removeClass( 'hide' );
				$( inp ).val('');
				$( btn ).append( response );
				waiter.addClass('hidden');
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});



/* VIEW COMMENTS */

//$( '.commentOpen' ).on( 'click', function( event ) {
$( document ).on( 'click', '.commentOpen', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(8);
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	//var btn = '#ID'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/engage/index.php',
		type		: 'POST',
		data 		: 	{
						commentView: itemID
						},
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {				
				//$( btn ).append( response );				
				$( btn ).html( response );		

			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});



/* FEEDBACK */

$( '.form_feedback' ).on( 'submit', function( event ) {
	
	var sourceID = $(this).attr("id"); //get form id
	
	var direc = sourceID.substring(5,7);
	var itemID = sourceID.substring(12);
	var ud=0;
	if (direc=='up') {
		var ud=1;
	}
	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	
	//var form_data = $(this).serialize(); //Encode form elements for submission	
	var id = $(this).serialize(); //Encode form elements for submission	

	var btn = '#upvote_'+itemID;
	var btn_inv = '#downvote_'+itemID;

	// process the form
	$.ajax({
		
		url : post_url,
		type: request_method,
		data : id,
		dataType: 'json',
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				//document.getElementById('id01').style.display='block';
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).val(response);
				
				$( btn ).toggleClass( "votesUp" );
				$( btn ).toggleClass( "votesUp_lite" );
				$( btn_inv ).removeClass( "votesDown" );
				$( btn_inv ).addClass( "votesDown_lite" );					
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});


/* VIEW */

//$( '.launch' ).on( 'click', function( event ) {
$( document ).on( 'click', '.launch', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(4);

	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/engage/index.php',
		type		: 'POST',
		data 		: 	{
						view: itemID
						},
		dataType	: 'json',
		encode      : true,
		success		: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				
				if ($.isArray(response)) {
					$( btn ).text(response[0]);			
					
					window.open(response[1],'_BLANK');	
				} else {
					$( btn ).text(response);	
				}						
					
				$( btn ).addClass( "launched" );		
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});


/* SAVE */

//$( '.save' ).on( 'click', function( event ) {
$( document ).on( 'click', '.save', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(4);
	
	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/engage/index.php',
		type		: 'POST',
		data 		: 	{
						save: itemID
						},
		dataType	: 'json',
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).text(response);				
				$( btn ).toggleClass( "saved" );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});


/* SUBSCRIBE */

//$( '.subscribe' ).on( 'click', function( event ) {
$( document ).on( 'click', '.subscribe', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(4);

	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/engage/index.php',
		type		: 'POST',
		data 		: 	{
						subscribe: itemID
						},
		dataType	: 'json',
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).text(response);				
				$( btn ).toggleClass( "subscribed" );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});
	
// form submission ////////////////////////////////////////


	
	$( ".projectTypeButton" ).click(function() {		


		$( "#step2" ).removeClass( "disableView", 1000, "linear" );
	});

	
	var timerid2;
	
	$("#idea_detail").keyup(function() {

		clearTimeout(timerid2);
		timerid2 = setTimeout(function() { 
			$( "#step3" ).removeClass( "disableView", 1000, "linear" );
		}, 500);
	});			

	$("#problem_desc").keyup(function() {

		clearTimeout(timerid2);
		timerid2 = setTimeout(function() { 
			$( "#step3" ).removeClass( "disableView", 1000, "linear" );
		}, 500);
	});		
	
	
	
//// investor pages ///////////////////////////////////////
  //$(".firm").click(function( event ){
  $(".firm").on( 'click', function( event ) {
	  
		var firmID = $(this).attr("id"); //get anchor id
		
		
		$( "#firm" ).load('https://seedproof.com/investors/firm.php?firm='+firmID);

		setTimeout(function(){
		   
			$( "#firm" ).removeClass( "hidden");		   
		   //$( "#firm" ).addClass( "animate");
		   
		}, 250);
		event.preventDefault(); 
		
  });
		
  /*
  $("#modalWrapper").click(function(){
	  
		$( "#firm" ).addClass( "hidden", 1000, "linear" );
		$(this).style.display="none";
		
  });
  */
  
  
 // SHOW FIRM DETAILS ON ROW CLICK//////////////////////////////////////////////////// 
    $( '#firm' ).on( 'click', function( event ) {
		
        var subject = $("#firm"); 

        //subject.fadeOut();
		
		var active = $("#modalWrapper"); 
		var closer = $("#closeModal"); 

        if(event.target.id == active.attr('id'))
        {
			event.preventDefault();
            //subject.fadeOut();
            subject.addClass( "hidden", 1000, "linear" );			
			
        }
		else if(event.target.id == closer.attr('id'))
        {
			event.preventDefault();
            //subject.fadeOut();
            subject.addClass( "hidden", 1000, "linear" );			
			
        }
		
    });   
	
    $( '#addCtl' ).on( 'click', function( event ) {
		event.preventDefault();
		
		$( "#controlOverlay" ).toggleClass( "hidden");
		$( "#addBlock" ).addClass( "controlBlock-active", 1000, "linear");
		
		$( "#addBlock" ).slideToggle();
		$( "#addCtl" ).toggleClass( "controlActive", 1000, "linear" );
    });  


	$( document ).on( 'scroll', function(){
		if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
			$( "#navbar" ).addClass( "navBorder");
		} else {
			$( "#navbar" ).removeClass( "navBorder");
		}
	});
	


//// show more details ///////////////////////////////////////
  $(".showMore").click(function( event ){
	  
		
		var invId = $(this).attr("id");
		var invId = invId.substr(8);
		var moreId= "#more"+invId;
		//$( moreId ).removeClass( "hidden", 1000, "linear" );
		
		event.preventDefault(); 
		$( moreId ).toggle( "slide" );
		
  });

$(".moreContacts").mouseleave(function(){
    $( this ).toggle( "slide" );
});


// VIEW COMMENTS /////////////////////////////////////////////
//for investors 
$( '.showComments_investors' ).on( 'click', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(8);
	var box = '#ID'+itemID;
	var btn = '#commentBox'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/investors/index.php',
		type		: 'POST',
		data 		: 	{
						commentView_investor: itemID
						},
		encode      : true,
		success		: function (response) {
		
		$( box ).addClass( "expand" );
		$( box ).addClass( "expanded" );
		$( btn ).html( response );	
			
		//alert(response);			

		}
	});
		
	event.preventDefault(); 


});

//for firms 
$( '.showComments_firms' ).on( 'click', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(8);
	var box = '#ID'+itemID;
	var btn = '#commentBox'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/investors/index.php',
		type		: 'POST',
		data 		: 	{
						commentView_firm: itemID
						},
		encode      : true,
		success		: function (response) {
		
		$( box ).addClass( "expand" );
		$( box ).addClass( "expanded" );
		$( btn ).html( response );	
			
		//alert(response);			

		}
	});
		
	event.preventDefault(); 


});




//// slide firm detail down ///////////////////////////////////////
//$(".firm-row").click(function( event ){
  //$('.firm-row').on( 'click', ':not(.showComments)', function( event ) {
  //$('.firm-row').on( 'click', function( event ) {
  $('.firm-row').on( 'click', function( event ) {


	if (!($(event.target).hasClass('contact'))) {
		
		//alert("it does not");

		$( ".grid-row-expand" ).addClass( "hidden", 1000, "linear" );
		$( ".firm-row" ).removeClass( "active-row", 1000, "linear" );
		
		var firmID = $(this).attr("id");
		var firmFocus = "#"+firmID+" .grid-row-expand";
		
		$( this ).addClass( "active-row", 1000, "linear" );		
		$( firmFocus ).removeClass( "hidden", 1000, "linear" );
		$( firmFocus ).slideToggle();	
		$( firmFocus ).load('https://seedproof.com/investors/firm-min.php?firm='+firmID);	
		
	}
	return;

	
	//event.preventDefault(); 
	
});
  
  
  


// SAVE COMMMENTS ////////////////////////////////////////////////////////////
//for investors
$(document).on('submit','.form_new_comment_investor',function( event ) { 
	
	var sourceID = $(this).attr("id"); //get form id	
	var itemID = sourceID.substring(14);
		
	var id = $(this).serialize(); //Encode form elements for submission	
	
	var btn = '#commentBox'+itemID;
	var inp = '#commentText'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/investors/index.php',
		type: 'POST',
		data : 	id,
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( inp ).val('');
				$( btn ).append( response );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});

//for firms
$(document).on('submit','.form_new_comment_firm',function( event ) { 
	
	var sourceID = $(this).attr("id"); //get form id	
	var itemID = sourceID.substring(14);
		
	var id = $(this).serialize(); //Encode form elements for submission	
	
	var btn = '#commentBox'+itemID;
	var inp = '#commentText'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/investors/index.php',
		type: 'POST',
		data : 	id,
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( inp ).val('');
				$( btn ).append( response );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});

 
 	
/* EDIT INVESTOR */

$( '.inv_edit' ).on( 'click', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(4);
	//alert(itemID);
	$( "#inv_edit" ).load('https://seedproof.com/investors/edit_inv.php?editID='+itemID);
		
	$( "#inv_edit" ).removeClass( "hidden", 1000, "linear" );
	//$( "#inv_edit" ).load('https://seedproof.com/investors/edit_inv.php');
	
	event.preventDefault(); 


}); 
	
/* EDIT FIRM */

$( '.firm_edit' ).on( 'click', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(4);
	//alert(itemID);
	$( "#inv_edit" ).load('https://seedproof.com/investors/edit_firm.php?editID='+itemID);
		
	$( "#inv_edit" ).removeClass( "hidden", 1000, "linear" );
	//$( "#inv_edit" ).load('https://seedproof.com/investors/edit_inv.php');
	
	event.preventDefault(); 


});

$( '#inv_edit' ).on( 'click', function( event ) {
	
	var subject = $("#inv_edit"); 

	//subject.fadeOut();
	
	var active = $("#modalWrapper"); 
	var closer = $("#closeModal"); 

	if(event.target.id == active.attr('id'))
	{
		event.preventDefault();
		//subject.fadeOut();
		subject.addClass( "hidden", 1000, "linear" );			
		
	}
	else if(event.target.id == closer.attr('id'))
	{
		event.preventDefault();
		//subject.fadeOut();
		subject.addClass( "hidden", 1000, "linear" );			
		
	}
	
});  


$( '.viewable' ).on( 'click', function( event ) {
		
	if( ($(event.target).hasClass("card")) || ($(event.target).hasClass("card_name")) || ($(event.target).hasClass("card_more")) || ($(event.target).hasClass("card_idea")) || ($(event.target).hasClass("card_problem")) || ($(event.target).hasClass("card_detail")) ) {		
		$( this ).find( '.card_more' ).toggleClass( 'hidden' );
		$( this ).find( '.card_problem' ).toggleClass( 'hidden' );
		$( this ).find( '.card_detail' ).toggleClass( 'hidden' );
		//$( this ).find( '.engage' ).toggleClass( 'hidden' );
		event.preventDefault();
	} 
	
	
});  
	
	
	
	
/* EDIT USER */

$( '.user_edit' ).on( 'click', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(2);
	//alert(itemID);
	
	$( "#user_edit" ).load('https://seedproof.com/people/edit_user.php?editID='+itemID);
		
	$( "#user_edit" ).removeClass( "hidden", 1000, "linear" );
	
	event.preventDefault(); 


}); 

	
/* EDIT USER - CLOSE */

$( '#user_edit' ).on( 'click', function( event ) {
	
	var subject = $("#user_edit"); 
	
	var active = $("#modalWrapper"); 
	var closer = $("#closeModal"); 

	if(event.target.id == active.attr('id'))
	{
		event.preventDefault();
		subject.addClass( "hidden", 1000, "linear" );			
		
	}
	else if(event.target.id == closer.attr('id'))
	{
		event.preventDefault();
		subject.addClass( "hidden", 1000, "linear" );			
		
	}
	
});  


	
/* universal popup window - CLOSE */

$( '#popup' ).on( 'click', function( event ) {
	
	var subject = $("#popup"); 
	
	var active = $("#modalWrapper"); 
	var closer = $("#closeModal"); 

	if(event.target.id == active.attr('id'))
	{
		event.preventDefault();
		subject.addClass( "hidden", 1000, "linear" );			
		
	}
	else if(event.target.id == closer.attr('id'))
	{
		event.preventDefault();
		subject.addClass( "hidden", 1000, "linear" );			
		
	}
	
});  



/* PRODUCT ZOOM */

/**/
$( '.productZoom' ).on( 'click', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(2);
	//alert(itemID);
	
	$( "#popup" ).html('<div>Loading...</div>');
	$( "#popup" ).load('https://seedproof.com/products/zoom.php?itemID='+itemID);
		
	$( "#popup" ).removeClass( "hidden", 1000, "linear" );
	
	event.preventDefault(); 


}); 



$(window).on("scroll", function() {
   if($(window).scrollTop() + $(window).height() == $(document).height()) {
       $( "#add" ).addClass( "addBottom", 1000, "linear" );
   } else {
	   $( "#add" ).removeClass( "addBottom", 1000, "linear" );
   }
});

	
	/*
$(window).on("scroll", function() {
	

	var target = $("#sideRight");
	
	var scrollHeight = target.outerHeight() + 140;
	var scrollPosition = $(window).height() + $(window).scrollTop();
	//if ((scrollHeight - scrollPosition) / scrollHeight === 0) {
	if ( scrollHeight <= scrollPosition ) {
	    // when scroll to bottom of the page
		target.addClass( "stickySideRight", 1000, "linear" );
	} else {		
		target.removeClass( "stickySideRight", 1000, "linear" );
	}
	
	
});
	*/

	
	
/* EDIT USER */

$(document).on('submit','#form_edit_user', function( event ) { 
			
	var editData = $(this).serialize(); //Encode form elements for submission	
	var errorBox = '#editErrors';

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/people/edit_validate.php',
		type		: 'POST',
data: new FormData(this), // Data sent to server, a set of key/value pairs
contentType: false,       // The content type used when sending data to the server.
cache: false,             // To unable request pages to be cached
processData:false,        // To send DOMDocument or non processed data file it is set to false
		success		: function (response) {

			if (!response) {
				window.location.href='https://seedproof.com/people?ref=updated';		
			} else {
				$( errorBox ).text(response);				
				$( errorBox ).removeClass( "hidden" );		
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});


// close steps
$(document).on('click','#closeSteps',function( event ) { 
	
	$("#memberSteps").addClass( "hidden", 1000, "linear" );	

	$.ajax({
		
		url : 'https://seedproof.com/scripts/u/closeSteps.php',
		type: 'POST',
		data : 	{closeSteps: 1},
		encode          : true,
	});
	
	event.preventDefault(); 

	
});
  
  
  
  	//$(".q").click(function(event){
	$(document).on('click','.q', function( event ) { 
		
		var sourceID = $(this).attr("id"); 
		var itemID = sourceID.substring(1);
		var answer = "#a"+itemID;
		
		$(this).toggleClass( "q-under" );
		$(answer).toggleClass( "hidden", 1000, "linear" );
		
		event.preventDefault();
			
	});
	
	
	
	

$(document).on('click','.subTabHeader', function( event ) { 
		
	var menuItemID = $(this).attr("id");
	var menuItem = "#"+menuItemID+"Sub";
	
	//$( this ).toggleClass( "prime-color", 1000, "linear" );
	//$( this ).toggleClass( "bold", 1000, "linear" );
	$( menuItem ).slideToggle();		
	
	event.preventDefault(); 
	
});	
	
	
	
	
	
//////////////////////////////////
//////////////////////////////////

/* FOR PROBLEMS */

/* ENGAGEMENT PROCESSESING */

//////////////////////////////////
//////////////////////////////////






/* UPVOTE */

//$( '.form_upvote' ).on( 'submit', function( event ) {
$( document ).on( 'submit', '.form_upvote_problem', function( event ) {
	
	var sourceID = $(this).attr("id"); //get form id
	
	var itemID = sourceID.substring(20);

	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	
	//var form_data = $(this).serialize(); //Encode form elements for submission	
	var id = $(this).serialize(); //Encode form elements for submission	

	var btn = '#upvote_'+itemID;
	var btn_inv = '#downvote_'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/problems/index.php',
		type: request_method,
		data : 	{
						upvote: itemID
						},
		dataType: 'json',
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				//document.getElementById('id01').style.display='block';
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).val(response[0]);
				$( btn_inv ).val(response[1]);
				
				$( btn ).toggleClass( "votesUp" );
				$( btn ).toggleClass( "votedUp" );
				$( btn ).toggleClass( "votesUp_lite" );
				$( btn_inv ).removeClass( "votesDown" );
				$( btn_inv ).removeClass( "votedDown" );
				$( btn_inv ).addClass( "votesDown_lite" );					
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});


/* DOWNVOTE */

//$( '.form_downvote' ).on( 'submit', function( event ) {
$( document ).on( 'submit', '.form_downvote_problem', function( event ) {
	
	var sourceID = $(this).attr("id"); //get form id
	
	var itemID = sourceID.substring(22);

	var post_url = $(this).attr("action"); //get form action url
	var request_method = $(this).attr("method"); //get form GET/POST method
	
	//var form_data = $(this).serialize(); //Encode form elements for submission	
	var id = $(this).serialize(); //Encode form elements for submission	

	var btn = '#downvote_'+itemID;
	var btn_inv = '#upvote_'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/problems/index.php',
		type: request_method,
		data : 	{
						downvote: itemID
						},
		dataType: 'json',
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				//document.getElementById('id01').style.display='block';
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).val(response[0]);
				$( btn_inv ).val(response[1]);
				
				$( btn ).toggleClass( "votesDown" );
				$( btn ).toggleClass( "votedDown" );
				$( btn ).toggleClass( "votesDown_lite" );
				$( btn_inv ).removeClass( "votesUp" );
				$( btn_inv ).removeClass( "votedUp" );
				$( btn_inv ).addClass( "votesUp_lite" );							
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});

/* COMMENT */

//$( '.form_new_comment' ).on( 'submit', function( event ) {
$(document).on('submit','.form_new_comment_problem',function( event ) { 
		
	var waiter = $("#waiting");
	waiter.removeClass('hidden');
		
	//$( this ).slideToggle();
	$( this ).find( 'input' ).addClass( 'hide' );
	$( this ).find( '.btn' ).addClass( 'hide' );

	
	var sourceID = $(this).attr("id"); //get form id	
	var itemID = sourceID.substring(22);

	//var post_url = $(this).attr("action"); //get form action url
	//var request_method = $(this).attr("method"); //get form GET/POST method
		
	var id = $(this).serialize(); //Encode form elements for submission	
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	var inp = '#commentText'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/problems/index.php',
		type: 'POST',
		data : 	id,
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( "#"+sourceID ).find( 'input' ).removeClass( 'hide' );
				$( "#"+sourceID ).find( '.btn' ).removeClass( 'hide' );
				$( inp ).val('');
				$( btn ).append( response );
				waiter.addClass('hidden');
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});



/* VIEW COMMENTS */

//$( '.commentOpen' ).on( 'click', function( event ) {
$( document ).on( 'click', '.commentOpen_problem', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(16);
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	//var btn = '#ID'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/problems/index.php',
		type		: 'POST',
		data 		: 	{
						commentView: itemID
						},
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {				
				//$( btn ).append( response );				
				$( btn ).html( response );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});



/* SAVE */

//$( '.save' ).on( 'click', function( event ) {
$( document ).on( 'click', '.save_problem', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(12);
	
	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/problems/index.php',
		type		: 'POST',
		data 		: 	{
						save: itemID
						},
		dataType	: 'json',
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).text(response);				
				$( btn ).toggleClass( "saved" );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});	
	
	
	
	
//////////////////////////////////
//////////////////////////////////

/* FOR FAILURES */

/* ENGAGEMENT PROCESSESING */

//////////////////////////////////
//////////////////////////////////



/* COMMENT */

//$( '.form_new_comment' ).on( 'submit', function( event ) {
$(document).on('submit','.form_new_comment_failure',function( event ) { 
		
	var waiter = $("#waiting");
	waiter.removeClass('hidden');
		
	//$( this ).slideToggle();
	$( this ).find( 'input' ).addClass( 'hide' );
	$( this ).find( '.btn' ).addClass( 'hide' );

	
	var sourceID = $(this).attr("id"); //get form id	
	var itemID = sourceID.substring(22);

	//var post_url = $(this).attr("action"); //get form action url
	//var request_method = $(this).attr("method"); //get form GET/POST method
		
	var id = $(this).serialize(); //Encode form elements for submission	
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	var inp = '#commentText'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/failures/index.php',
		type: 'POST',
		data : 	id,
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( "#"+sourceID ).find( 'input' ).removeClass( 'hide' );
				$( "#"+sourceID ).find( '.btn' ).removeClass( 'hide' );
				$( inp ).val('');
				$( btn ).append( response );
				waiter.addClass('hidden');
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});



/* VIEW COMMENTS */

//$( '.commentOpen' ).on( 'click', function( event ) {
$( document ).on( 'click', '.commentOpen_failure', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(16);
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	//var btn = '#ID'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/failures/index.php',
		type		: 'POST',
		data 		: 	{
						commentView: itemID
						},
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {				
				//$( btn ).append( response );				
				$( btn ).html( response );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});



/* SAVE */

//$( '.save' ).on( 'click', function( event ) {
$( document ).on( 'click', '.save_failure', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(12);
	
	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/failures/index.php',
		type		: 'POST',
		data 		: 	{
						save: itemID
						},
		dataType	: 'json',
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( btn ).text(response);				
				$( btn ).toggleClass( "saved" );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});



//////////////////////////////////
//////////////////////////////////

/* FOR STAGES */

/* STEP PROCESSESING */

//////////////////////////////////
//////////////////////////////////

$( document ).on( 'click', '.checkable', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var stepID = sourceID.substring(4,6);
	var stageID = sourceID.substring(6);
	//alert(stepID);
	//alert(stageID);
	
	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/stages/progress.php',
		type		: 'POST',
		data 		: 	{
						step: stepID,
						stage: stageID
						},
						/*
		dataType	: 'json',
		*/
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login/?src=stages';
			} else {
				//$( btn ).text(response);				
				$( btn ).toggleClass( "done" );	
				window.location.href='https://seedproof.com/stages/?src=progress';
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});


$( document ).on( 'click', '.track_checkable', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var stepID = sourceID.substring(4,6);
	var stageID = sourceID.substring(6);
	//alert(stepID);
	//alert(stageID);
	
	var btn = '#'+sourceID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/tracks/progress.php',
		type		: 'POST',
		data 		: 	{
						step: stepID,
						stage: stageID
						},
						/*
		dataType	: 'json',
		*/
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login/?src=stages';
				
			} else {
				//$( btn ).text(response);				
				$( btn ).toggleClass( "done" );	
				//window.location.href='https://seedproof.com/tracks/?src=progress';
				window.location.reload();
								
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});



//////////////////////////////////
//////////////////////////////////

/* FOR STAGES */

/* ENGAGEMENT PROCESSESING */

//////////////////////////////////
//////////////////////////////////



/* COMMENT */

$(document).on('submit','.form_new_comment_stage',function( event ) { 
		
	var waiter = $("#waiting");
	waiter.removeClass('hidden');
		
	//$( this ).slideToggle();
	$( this ).find( 'input' ).addClass( 'hide' );
	$( this ).find( '.btn' ).addClass( 'hide' );

	
	var sourceID = $(this).attr("id"); //get form id	
	var itemID = sourceID.substring(20);

	//var post_url = $(this).attr("action"); //get form action url
	//var request_method = $(this).attr("method"); //get form GET/POST method
		
	var id = $(this).serialize(); //Encode form elements for submission	
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	var inp = '#commentText'+itemID;

	// process the form
	$.ajax({
		
		url : 'https://seedproof.com/scripts/stages/index.php',
		type: 'POST',
		data : 	id,
		encode          : true,
		success: function (response) {
			
			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {
				$( "#"+sourceID ).find( 'input' ).removeClass( 'hide' );
				$( "#"+sourceID ).find( '.btn' ).removeClass( 'hide' );
				$( inp ).val('');
				$( btn ).append( response );
				waiter.addClass('hidden');
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 

	
});


/* VIEW COMMENTS */

$( document ).on( 'click', '.commentOpen_stage', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(14);
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	//var btn = '#ID'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/stages/index.php',
		type		: 'POST',
		data 		: 	{
						commentView: itemID
						},
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login?loc='+itemID;
			} else {				
				//$( btn ).append( response );				
				$( btn ).html( response );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});


/* VIEW COMMENTS - Tracks */

$( document ).on( 'click', '.commentOpen_track', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(14);
	//alert(itemID);
	var btn = '#commentBox'+itemID;
	//var btn = '#ID'+itemID;

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/scripts/tracks/',
		type		: 'POST',
		data 		: 	{
						commentView: itemID
						},
		encode      : true,
		success		: function (response) {

			if (response=="x") {
				window.location.href='https://seedproof.com/global/login/?loc='+itemID;
			} else {				
				//$( btn ).append( response );				
				$( btn ).html( response );				
			}
			
			//alert(response);
		}
	});
		
	event.preventDefault(); 


});


/* SELECT TRACK */

$( document ).on( 'click', '#p1', function( event ) {
	window.location.href='https://seedproof.com/tracks/maker/';

});
$( document ).on( 'click', '#p2', function( event ) {
	window.location.href='https://seedproof.com/tracks/owner/';

});
$( document ).on( 'click', '#p3', function( event ) {
	window.location.href='https://seedproof.com/tracks/founder/';

});
$( document ).on( 'click', '#p4', function( event ) {
	window.location.href='https://seedproof.com/tracks/inventor/';

});



// update form after delay in typing
/*
var timerid2;
$("#form_seedpitch").keyup(function() {
  var form = this;
  clearTimeout(timerid2);
  //var form_data = $(this).serialize(); //Encode form elements for submission	
  var form_data = new FormData(this);
  timerid2 = setTimeout(function() { 

	// process the form
	$.ajax({
		
		url 		: 'https://seedproof.com/seedpitch/update.php',
		type		: 'POST',
		data 		: 	{
						form_data
						},
        contentType: false,
        cache: false,
        processData:false,
		success		: function (response) {
			
			var msgBox = $('#status_msg');
			msgBox.removeClass('hidden');
			setTimeout(function() {
				msgBox.addClass('hidden');
			}, 4000);
		}
	});
		
	 

  }, 900);
});
*/
	
	
var timerid2;
$(".form_base_update").keyup(function( event ) {
	
	clearTimeout(timerid2);
	
	var id = $(this).serialize(); 
	
	//alert (id);
  
	timerid2 = setTimeout(function() { 

		// process the form
		$.ajax({
			
			url 		: 'https://seedproof.com/stages/update.php',
			type		: 'POST',
			data 		: id,
			encode      : true,
			success		: function (response) {
				
				if (response=="x") {
					window.location.href='https://seedproof.com/global/login/';
				} else if (response=="y") {
					window.location.href='https://seedproof.com/stages/join.php';
				} else {						
					window.location.reload();
					$( this ).addClass( "saved" );	
					//alert(response);
				}
				
			}
		});		
	 

	}, 900);
  
  event.preventDefault(); 
  
});	
	
	
	
	
$( document ).on( 'click', '.threadHeader', function( event ) {
	
	var sourceID = $(this).attr("id"); //get anchor id
	
	var itemID = sourceID.substring(6);
	
	//alert (itemID);
	var box = '#threadWrap'+itemID;
	var btn = '#thread'+itemID;
	

	if ($( btn ).hasClass( "opened" )) {
		$( box ).addClass( "hidden" );
		$( btn ).removeClass( "opened" );
	} else {
		// process the form
		$.ajax({
			
			url 		: 'https://seedproof.com/stages/comments.php',
			type		: 'POST',
			data 		: 	{
							commentView: itemID
							},
			encode      : true,
			success		: function (response) {

				if (response=="x") {
					window.location.href='https://seedproof.com/global/login/?loc='+itemID;
				} else {				
					//$( btn ).append( response );	
					$( box ).removeClass( "hidden" );
					$( box ).html( response );	
					$( btn ).addClass( "opened" );				
				}
				
				//alert(response);
			}
		});
	}
	
	event.preventDefault(); 


});
	
	
	
	
	
	
	
	
	
	
	
	
	
}); //end js




